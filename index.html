<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ë§í•˜ëŠ” ì§€í•˜ì²  ì²™ì²™ë°•ì‚¬ë‹˜ (ì˜¤ë¥˜ ìˆ˜ì •íŒ)</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Jua&display=swap');
        
        body {
            font-family: 'Jua', sans-serif;
            background-color: #FFF8E1;
            text-align: center;
            margin: 0;
            padding: 10px;
            user-select: none;
            -webkit-user-select: none;
            overflow-x: hidden;
            touch-action: manipulation;
        }

        /* --- 1. ì‹œì‘ í™”ë©´ --- */
        #start-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 90vh;
            background: #fff;
        }

        .menu-btn {
            width: 90%;
            max-width: 350px;
            padding: 20px;
            margin: 15px;
            font-size: 22px;
            font-family: 'Jua', sans-serif;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            box-shadow: 0 5px 10px rgba(0,0,0,0.2);
            transition: transform 0.1s;
            color: white;
            font-weight: bold;
            text-align: left;
            padding-left: 30px;
            position: relative;
        }
        .menu-btn:active { transform: scale(0.98); }
        .menu-btn::after { content: 'â–¶'; position: absolute; right: 20px; opacity: 0.5; }
        
        .btn-line1 { background-color: #0052A4; } 
        .btn-line5 { background-color: #996CAC; } 
        .btn-line9 { background-color: #AA9872; } 

        /* --- 2. ê²Œì„ í™”ë©´ í—¤ë” --- */
        header {
            display: none;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: white;
            border-radius: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
        }

        #game-title { margin: 0; font-size: 24px; }
        #score-board { font-size: 22px; color: #555; font-weight: bold; }
        .highlight-score { color: #FF8F00; font-size: 26px; }

        /* --- 3. ë©”ì¸ ë ˆì´ì•„ì›ƒ --- */
        .container {
            display: none;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            max-width: 1000px;
            margin: 0 auto;
        }

        .left-panel { flex: 1; min-width: 320px; }
        .right-panel { flex: 0.7; min-width: 280px; }

        /* --- 4. ì§€ë„ --- */
        #map-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: flex-start;
            gap: 15px 5px; 
            padding: 20px;
            background: white;
            border-radius: 15px;
            margin-bottom: 20px;
            border: 3px solid #eee;
        }

        .station-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 50px;
            position: relative;
        }

        .station-wrapper::after {
            content: '';
            position: absolute;
            top: 6px;
            right: -28px; 
            width: 30px;
            height: 4px;
            background-color: #eee;
            z-index: 0;
        }
        .station-wrapper:last-child::after { display: none; }
        
        .station-dot {
            width: 14px;
            height: 14px;
            background-color: #eee;
            border: 2px solid #ddd;
            border-radius: 50%;
            z-index: 1;
            transition: all 0.4s;
        }
        
        .station-dot.active {
            transform: scale(1.3);
            border: 2px solid white;
            box-shadow: 0 0 5px rgba(0,0,0,0.3);
        }

        .station-name {
            font-size: 10px;
            margin-top: 5px;
            color: #ccc;
            text-align: center;
            word-break: keep-all;
            height: 25px;
        }
        .station-name.revealed { color: #333; font-weight: bold; }

        .transfer-badges { display: flex; gap: 2px; justify-content: center; margin-top: 2px; visibility: hidden;}
        .revealed .transfer-badges { visibility: visible; }
        .line-badge { width: 6px; height: 6px; border-radius: 50%; display: inline-block; }

        /* --- 5. ê²Œì„ ì˜ì—­ --- */
        #game-area {
            background-color: white;
            border-radius: 20px;
            padding: 20px;
            border: 5px solid #ddd;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        #current-station {
            font-size: 30px;
            font-weight: bold;
            margin: 10px 0;
            padding: 15px;
            background-color: #fff9e6;
            border-radius: 15px;
        }

        .option-btn {
            display: flex;
            align-items: center;
            width: 100%;
            padding: 12px;
            margin: 8px 0;
            font-size: 20px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            background-color: #f7fafc;
            color: #444;
            cursor: pointer;
            font-family: 'Jua', sans-serif;
            position: relative;
        }
        .option-btn:hover { background-color: #edf2f7; }
        .option-btn:active, .option-btn.key-pressed { transform: scale(0.98); background-color: #e2e8f0; border-color: #cbd5e0;}
        
        /* ì •ë‹µ ë§ì·„ì„ ë•Œ ë²„íŠ¼ ë¹„í™œì„±í™” ìŠ¤íƒ€ì¼ */
        .option-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .btn-num {
            color: white;
            width: 30px; height: 30px;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            margin-right: 15px; font-size: 18px; font-weight: bold;
        }

        .wrong-feedback {
            font-size: 14px;
            color: #e53e3e;
            margin-left: auto;
            font-weight: bold;
        }

        /* --- 6. ì„¤ëª… ì¹´ë“œ + ìŠ¤í”¼ì»¤ --- */
        #info-card {
            background-color: #FFF;
            border-radius: 20px;
            padding: 25px;
            border: 4px solid #FFAB91;
            text-align: left;
            position: sticky;
            top: 20px;
        }
        #info-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px dashed #FFCCBC;
            padding-bottom: 10px;
            margin-bottom: 15px;
        }
        #info-title { font-size: 24px; color: #D84315; margin: 0; }
        
        #speak-btn {
            background-color: #FF7043;
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 0 #D84315;
            transition: transform 0.1s;
        }
        #speak-btn:active { transform: translateY(4px); box-shadow: none; }

        #info-text { font-size: 22px; color: #444; line-height: 1.6; }

        #message { height: 30px; font-size: 20px; font-weight: bold; margin-top: 10px; }
        .correct { color: #2E7D32; } .wrong { color: #C62828; }

        #success-screen { display: none; }
        .nav-btn { background-color: #555; color: white; padding: 12px 25px; border: none; border-radius: 30px; font-size: 18px; margin-top: 15px; cursor: pointer;}
        
    </style>
</head>
<body>

    <div id="start-screen">
        <h1 style="font-size: 45px; margin-bottom: 10px;">ğŸ”Š ë§í•˜ëŠ” ì§€í•˜ì²  ì²™ì²™ë°•ì‚¬</h1>
        <p style="font-size: 20px; color:#666; margin-bottom: 40px;">ğŸµ ì´ë²ˆ ì—­ì€ ì–´ë””ì¼ê¹Œìš”?</p>
        
        <button class="menu-btn btn-line1" onclick="selectLine('1')">ğŸŸ¦ 1í˜¸ì„  (ì„œìš¸ì—­ â¡ ì¸ì²œ)</button>
        <button class="menu-btn btn-line5" onclick="selectLine('5')">ğŸŸª 5í˜¸ì„  (ë°©í™” â¡ í•˜ë‚¨ê²€ë‹¨ì‚°)</button>
        <button class="menu-btn btn-line9" onclick="selectLine('9')">ğŸŸ¨ 9í˜¸ì„  (ì¤‘ì•™ë³´í›ˆ â¡ ê°œí™”)</button>
    </div>

    <header id="game-header">
        <h1 id="game-title">ë…¸ì„  ì´ë¦„</h1>
        <div id="score-board">ì§„í–‰ë„: <span class="highlight-score">0</span> / 0</div>
    </header>

    <div class="container" id="game-container">
        <div class="left-panel">
            <div id="map-container"></div>

            <div id="game-area">
                <div id="play-screen">
                    <div style="font-size:16px; color:#888;">ì§€ê¸ˆ ë„ì°©í•œ ì—­ì€?</div>
                    <div id="current-station">ì¶œë°œì—­</div>
                    <div class="arrow" style="font-size: 20px; color:#aaa; margin:10px 0;">â¬‡ï¸ ë‹¤ìŒ ì—­ì€ ì–´ë””ì¼ê¹Œìš”? â¬‡ï¸</div>
                    
                    <div id="options-container"></div>
                    <div id="message"></div>
                </div>

                <div id="success-screen">
                    <h2 style="font-size:35px;">ğŸ‰ ì¢…ì  ë„ì°©! ğŸ‰</h2>
                    <p id="success-msg" style="font-size:22px;">ì™€! ëê¹Œì§€ ë‹¤ ì™”ì–´ìš”!</p>
                    <button class="nav-btn" onclick="location.reload()">ë‹¤ë¥¸ ë…¸ì„ ë„ í•´ë³´ê¸°</button>
                </div>
            </div>
        </div>

        <div class="right-panel">
            <div id="info-card">
                <div id="info-header">
                    <h3 id="info-title">ì—­ ì´ì•¼ê¸° ğŸ“–</h3>
                    <button id="speak-btn" onclick="speakWithChime()" title="ë‹¤ì‹œ ë“£ê¸°">ğŸ”Š</button>
                </div>
                <div id="info-text">
                    ì•ˆë…•? ë‚˜ëŠ” ì§€í•˜ì²  ìš”ì •ì´ì•¼.<br>
                    ì •ë‹µì„ ë§ì¶”ë©´ ë‚´ê°€ ì¬ë¯¸ìˆëŠ” ì´ì•¼ê¸°ë¥¼ ì½ì–´ì¤„ê²Œ!
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- 1. ë°ì´í„° ---
        const lineColors = {
            "1": "#0052A4", "2": "#009D3E", "3": "#EF7C1C", "4": "#0052A4", 
            "5": "#996CAC", "6": "#CD7C2F", "7": "#747F00", "8": "#E6186C", "9": "#AA9872",
            "ë¶„ë‹¹": "#F5A200", "ì‹ ë¶„ë‹¹": "#D4003B", "ê³µí•­": "#0090D2", 
            "ì‹ ë¦¼": "#6789CA", "ì„œí•´": "#81A914", "ì¸ì²œ1": "#7CA8D5", "ìˆ˜ì¸ë¶„ë‹¹": "#F5A200", "ê²½ì˜ì¤‘ì•™": "#77C4A3"
        };

        const otherStationsDB = {
            "ê°•ë‚¨": "2í˜¸ì„ ", "ì ì‹¤": "2í˜¸ì„ ", "í™ëŒ€ì…êµ¬": "2í˜¸ì„ ", "ì‹ ë„ë¦¼": "1,2í˜¸ì„ ", "ì‚¬ë‹¹": "2,4í˜¸ì„ ",
            "ì„ì§€ë¡œì…êµ¬": "2í˜¸ì„ ", "ì„±ìˆ˜": "2í˜¸ì„ ", "ì••êµ¬ì •": "3í˜¸ì„ ", "ì‹ ì‚¬": "3í˜¸ì„ ", "ì–‘ì¬": "3í˜¸ì„ ",
            "ëª…ë™": "4í˜¸ì„ ", "ë™ëŒ€ë¬¸": "1,4í˜¸ì„ ", "í˜œí™”": "4í˜¸ì„ ", "ì´íƒœì›": "6í˜¸ì„ ", "ìƒìˆ˜": "6í˜¸ì„ ",
            "ê±´ëŒ€ì…êµ¬": "2,7í˜¸ì„ ", "ê´‘í™”ë¬¸": "5í˜¸ì„ ", "ì²œí˜¸": "5,8í˜¸ì„ ", "ìˆ˜ì„œ": "3,ìˆ˜ì¸ë¶„ë‹¹", "íŒêµ": "ì‹ ë¶„ë‹¹",
            "ì™•ì‹­ë¦¬": "2,5,ê²½ì˜ì¤‘ì•™"
        };

        const gameData = {
            "1": {
                name: "1í˜¸ì„  (ì„œìš¸ì—­ â¡ ì¸ì²œ)",
                mainColor: "#0052A4",
                stations: [
                    { name: "ì„œìš¸ì—­", trans: ["4", "ê³µí•­"], desc: "ìš°ë¦¬ë‚˜ë¼ì—ì„œ ì œì¼ í° ê¸°ì°¨ì—­! ì¼€ì´í‹°ì—‘ìŠ¤ê°€ ì¹™ì¹™í­í­!" },
                    { name: "ë‚¨ì˜", trans: [], desc: "ë§›ìˆëŠ” ìŠ¤í…Œì´í¬ ëƒ„ìƒˆê°€ ë‚˜ëŠ” ë™ë„¤ì•¼." },
                    { name: "ìš©ì‚°", trans: ["ê²½ì˜ì¤‘ì•™"], desc: "ë¡œë´‡ì´ë‘ ì»´í“¨í„°ê°€ ê°€ë“í•œ ì „ììƒê°€ê°€ ìˆì–´!" },
                    { name: "ë…¸ëŸ‰ì§„", trans: ["9"], desc: "í„ë–¡í„ë–¡ ë¬¼ê³ ê¸°ê°€ ìˆëŠ” ìˆ˜ì‚°ì‹œì¥!" },
                    { name: "ëŒ€ë°©", trans: ["ì‹ ë¦¼"], desc: "ì—¬ì˜ë„ë¡œ ë“¤ì–´ê°€ëŠ” ì…êµ¬ì•¼." },
                    { name: "ì‹ ê¸¸", trans: ["5"], desc: "ë§¤ìš´ ì§¬ë½•ì´ ì•„ì£¼ ìœ ëª…í•´. í˜¸ë¡œë¡!" },
                    { name: "ì˜ë“±í¬", trans: [], desc: "ê¸°ì°¨ë„ ì„œê³ , ë°±í™”ì ë„ ìˆëŠ” í° ì—­ì´ì•¼." },
                    { name: "ì‹ ë„ë¦¼", trans: ["2"], desc: "ì‚¬ëŒë“¤ì´ ì •ë§ ë§ì´ ê°ˆì•„íƒ€ëŠ” ì—­ì´ì•¼. ë¶ì ë¶ì !" },
                    { name: "êµ¬ë¡œ", trans: [], desc: "ì—¬ê¸°ì„œ ì¸ì²œ ê°€ëŠ” ê¸¸ê³¼ ìˆ˜ì› ê°€ëŠ” ê¸¸ì´ ê°ˆë¼ì ¸!" },
                    { name: "êµ¬ì¼", trans: [], desc: "ë” ì•¼êµ¬ì¥ì´ ë³´ì—¬! ì•¼êµ¬ ë³´ëŸ¬ ê°€ì!" },
                    { name: "ê°œë´‰", trans: [], desc: "ì¬ë¯¸ìˆëŠ” ì˜í™”ê´€ì´ ìˆëŠ” ì—­ì´ì•¼." },
                    { name: "ì˜¤ë¥˜ë™", trans: [], desc: "ì˜ˆì „ì— ì£¼ë§‰ê±°ë¦¬ê°€ ìˆë˜ ê³³ì´ë˜." },
                    { name: "ì˜¨ìˆ˜", trans: ["7"], desc: "7í˜¸ì„ ìœ¼ë¡œ ê°ˆì•„íƒ€ë©´ ê°•ë‚¨ìœ¼ë¡œ ê°ˆ ìˆ˜ ìˆì–´." },
                    { name: "ì—­ê³¡", trans: [], desc: "ì‹œì¥ì´ ê°€ê¹Œì›Œì„œ ì‚¬ëŒë“¤ì´ ë§ì•„." },
                    { name: "ì†Œì‚¬", trans: ["ì„œí•´"], desc: "ì•„ì£¼ ë§›ìˆëŠ” ë³µìˆ­ì•„ê°€ ìœ ëª…í–ˆë˜ ê³³ì´ë˜." },
                    { name: "ë¶€ì²œ", trans: [], desc: "í° ì´ë§ˆíŠ¸ë‘ ì—­ì´ ì—°ê²°ë˜ì–´ ìˆì–´." },
                    { name: "ì¤‘ë™", trans: [], desc: "ì•„íŒŒíŠ¸ê°€ ì•„ì£¼ ë§ì€ ë™ë„¤ì•¼." },
                    { name: "ì†¡ë‚´", trans: [], desc: "ì˜í™” ê±°ë¦¬ì— ê°ˆ ìˆ˜ ìˆëŠ” ë²„ìŠ¤ë¥¼ íƒˆ ìˆ˜ ìˆì–´." },
                    { name: "ë¶€ê°œ", trans: [], desc: "ì¡°ìš©í•˜ê³  ì‚´ê¸° ì¢‹ì€ ë™ë„¤ì•¼." },
                    { name: "ë¶€í‰", trans: ["ì¸ì²œ1"], desc: "ì§€í•˜ìƒê°€ê°€ ë¯¸ë¡œì²˜ëŸ¼ ì—„ì²­ ë„“ì–´! ê¸¸ ìƒì§€ ì•Šê²Œ ì¡°ì‹¬!" },
                    { name: "ë°±ìš´", trans: [], desc: "í•˜ì–€ êµ¬ë¦„ì´ë¼ëŠ” ì˜ˆìœ ì´ë¦„ì´ì•¼." },
                    { name: "ë™ì•”", trans: [], desc: "êµ¬ë¦¬ê´‘ì‚°ì´ ìˆë˜ ë§ˆì„ì´ë˜." },
                    { name: "ê°„ì„", trans: [], desc: "í° ë°”ìœ„ê°€ ìˆì—ˆë‹¤ê³  í•´ì„œ ê°„ì„ì´ë˜." },
                    { name: "ì£¼ì•ˆ", trans: ["ì¸ì²œ2"], desc: "ì¸ì²œ ì§€í•˜ì²  2í˜¸ì„ ìœ¼ë¡œ ê°ˆì•„íƒˆ ìˆ˜ ìˆì–´." },
                    { name: "ë„í™”", trans: [], desc: "ë³µìˆ­ì•„ ê½ƒì´ ë§ì´ í”¼ë˜ ë™ë„¤ë˜." },
                    { name: "ì œë¬¼í¬", trans: [], desc: "í•™êµë“¤ì´ ë§ì´ ëª¨ì—¬ìˆëŠ” ê³³ì´ì•¼." },
                    { name: "ë„ì›", trans: [], desc: "ì¸ì²œ ì¶•êµ¬ ì „ìš© ê²½ê¸°ì¥ì´ ë°”ë¡œ ì˜†ì´ì•¼!" },
                    { name: "ë™ì¸ì²œ", trans: [], desc: "ë§›ìˆëŠ” ë‹­ê°•ì •ì´ ìœ ëª…í•œ ì‹œì¥ì´ ìˆì–´!" },
                    { name: "ì¸ì²œ", trans: ["ìˆ˜ì¸ë¶„ë‹¹"], desc: "ë„ì°©! ì§œì¥ë©´ì´ íƒœì–´ë‚œ ì°¨ì´ë‚˜íƒ€ìš´ì´ ìˆì–´!" }
                ]
            },
            "5": {
                name: "5í˜¸ì„  (ë°©í™” â¡ í•˜ë‚¨ê²€ë‹¨ì‚°)",
                mainColor: "#996CAC",
                stations: [
                    { name: "ë°©í™”", trans: [], desc: "5í˜¸ì„  ê¸°ì°¨ë“¤ì´ ì‰¬ëŠ” ê³³ì´ì•¼. ê½ƒì´ í”¼ëŠ” ë™ë„¤ë˜!" },
                    { name: "ê°œí™”ì‚°", trans: [], desc: "ì‘ì€ ì‚°ì´ ìˆì–´ì„œ ë“±ì‚°í•˜ê¸° ì¢‹ì•„." },
                    { name: "ê¹€í¬ê³µí•­", trans: ["9", "ê³µí•­", "ì„œí•´"], desc: "ë¹„í–‰ê¸°ë¥¼ íƒ€ê³  ì—¬í–‰ì„ ë– ë‚˜ìš”!" },
                    { name: "ì†¡ì •", trans: [], desc: "ê³µí•­ ê°€ëŠ” ê¸¸ëª©ì— ìˆëŠ” ë™ë„¤ì•¼." },
                    { name: "ë§ˆê³¡", trans: [], desc: "ê³¼í•™ìë“¤ì´ ì—°êµ¬í•˜ëŠ” í° ì—°êµ¬ì†Œê°€ ìˆì–´." },
                    { name: "ë°œì‚°", trans: [], desc: "ë§›ìˆëŠ” ì‹ë‹¹ë“¤ì´ ì •ë§ ë§ì€ ê³³ì´ì•¼." },
                    { name: "ìš°ì¥ì‚°", trans: [], desc: "ë¹„ê°€ ì˜¤ë©´ ê¸°ìš°ì œë¥¼ ì§€ë‚´ë˜ ì‚°ì´ë˜." },
                    { name: "í™”ê³¡", trans: [], desc: "ì‚¬ëŒë“¤ì´ ì•„ì£¼ ë§ì´ ì‚¬ëŠ” ë™ë„¤ì•¼." },
                    { name: "ê¹Œì¹˜ì‚°", trans: ["2"], desc: "ê¹Œì¹˜ê°€ ë§ì•˜ë˜ ì‚°ì´ë˜. ê¹ê¹!" },
                    { name: "ì‹ ì •", trans: [], desc: "ì€í–‰ë‚˜ë¬´ê°€ ë§ì€ ë™ë„¤ì•¼." },
                    { name: "ëª©ë™", trans: [], desc: "ê³µë¶€í•˜ëŠ” í•™ì›ì´ ì •ë§ ë§ì•„." },
                    { name: "ì˜¤ëª©êµ", trans: [], desc: "í˜„ëŒ€ë°±í™”ì ì´ë‘ ì•¼êµ¬ì¥ì´ ê°€ê¹Œì›Œ!" },
                    { name: "ì–‘í‰", trans: [], desc: "ì•ˆì–‘ì²œ ëƒ‡ê°€ë¥¼ ê±´ë„ ìˆ˜ ìˆì–´." },
                    { name: "ì˜ë“±í¬êµ¬ì²­", trans: ["2"], desc: "êµ¬ì²­ì€ ìš°ë¦¬ ë™ë„¤ ì¼ì„ í•´ì£¼ëŠ” ê³³ì´ì•¼." },
                    { name: "ì˜ë“±í¬ì‹œì¥", trans: [], desc: "ì•„ì£¼ ì˜¤ë˜ëœ ì „í†µì‹œì¥ì´ ìˆì–´." },
                    { name: "ì‹ ê¸¸", trans: ["1"], desc: "1í˜¸ì„ ìœ¼ë¡œ ê°ˆì•„íƒ€ë©´ ì¸ì²œìœ¼ë¡œ ê°ˆ ìˆ˜ ìˆì–´!" },
                    { name: "ì—¬ì˜ë„", trans: ["9"], desc: "ë†’ì€ ë¹Œë”©ë“¤ê³¼ í•œê°• ê³µì›ì´ ìˆì–´." },
                    { name: "ì—¬ì˜ë‚˜ë£¨", trans: [], desc: "ì—­ì—ì„œ ë‚˜ì˜¤ë©´ ë°”ë¡œ í•œê°•ì´ì•¼! í…íŠ¸ ì¹˜ê³  ë†€ì!" },
                    { name: "ë§ˆí¬", trans: [], desc: "ë§›ìˆëŠ” ê³ ê¸°ì§‘ì´ ë§ì€ ê³³ì´ì•¼." },
                    { name: "ê³µë•", trans: ["6", "ê²½ì˜ì¤‘ì•™", "ê³µí•­"], desc: "ê¸°ì°¨ê°€ 4ê°œë‚˜ ë‹¤ë‹ˆëŠ” ì—„ì²­ í° ì—­ì´ì•¼!" },
                    { name: "ì• ì˜¤ê°œ", trans: [], desc: "ì‘ì€ ê³ ê°œë¼ëŠ” ëœ»ì´ë˜. ê·€ì—½ì§€?" },
                    { name: "ì¶©ì •ë¡œ", trans: ["2"], desc: "ì´ˆë¡ìƒ‰ 2í˜¸ì„ ìœ¼ë¡œ ê°ˆì•„íƒˆ ìˆ˜ ìˆì–´." },
                    { name: "ì„œëŒ€ë¬¸", trans: [], desc: "ê²½ì°°ì²­ ë³¸ë¶€ê°€ ì—¬ê¸° ìˆì–´. ì‚ìš©ì‚ìš©!" },
                    { name: "ê´‘í™”ë¬¸", trans: [], desc: "ì„¸ì¢…ëŒ€ì™•ë‹˜ê³¼ ì´ìˆœì‹  ì¥êµ°ë‹˜ ë™ìƒì´ ìˆì–´!" },
                    { name: "ì¢…ë¡œ3ê°€", trans: ["1", "3"], desc: "ì˜í™”ê´€ë„ ë§ê³  ê¸ˆì€ë³´ì„ë„ ë§ì´ íŒ”ì•„." },
                    { name: "ì„ì§€ë¡œ4ê°€", trans: ["2"], desc: "ì¡°ëª… ê°€ê²Œê°€ ë§ì•„ì„œ ë°˜ì§ë°˜ì§í•´." },
                    { name: "ë™ëŒ€ë¬¸ì—­ì‚¬ë¬¸í™”ê³µì›", trans: ["2", "4"], desc: "ìš°ì£¼ì„ ì²˜ëŸ¼ ìƒê¸´ ë©‹ì§„ ê±´ë¬¼ì´ ìˆì–´!" },
                    { name: "ì²­êµ¬", trans: ["6"], desc: "ì•½ìˆ˜ë™ì´ë‘ ì‹ ë‹¹ë™ ì‚¬ì´ì— ìˆì–´." },
                    { name: "ì‹ ê¸ˆí˜¸", trans: [], desc: "ì‡ ë¥¼ ë…¹ì´ë˜ ê³³ì´ë¼ ê¸ˆí˜¸ë™ì´ë˜." },
                    { name: "í–‰ë‹¹", trans: [], desc: "ì‚´êµ¬ ë‚˜ë¬´ê°€ ë§ì•˜ë˜ ê³³ì´ë˜." },
                    { name: "ì™•ì‹­ë¦¬", trans: ["2", "ìˆ˜ì¸ë¶„ë‹¹", "ê²½ì˜ì¤‘ì•™"], desc: "ì˜í™”ë„ ë³´ê³  ì‡¼í•‘ë„ í•˜ëŠ” í° ì—­ì´ì•¼." },
                    { name: "ë§ˆì¥", trans: [], desc: "ë§›ìˆëŠ” ì†Œê³ ê¸°ë¥¼ íŒŒëŠ” ì‹œì¥ì´ ìˆì–´." },
                    { name: "ë‹µì‹­ë¦¬", trans: [], desc: "ì˜›ë‚  ë¬¼ê±´ë“¤ì„ íŒŒëŠ” ìƒê°€ê°€ ìˆì–´." },
                    { name: "ì¥í•œí‰", trans: [], desc: "ìë™ì°¨ ë§¤ë§¤ ì‹œì¥ì´ ìˆì–´." },
                    { name: "êµ°ì", trans: ["7"], desc: "ê°€êµ¬ ê±°ë¦¬ê°€ ìœ ëª…í•œ ê³³ì´ì•¼." },
                    { name: "ì•„ì°¨ì‚°", trans: [], desc: "ì–´ë¦°ì´ëŒ€ê³µì› í›„ë¬¸ìœ¼ë¡œ ê°ˆ ìˆ˜ ìˆì–´! ì½”ë¼ë¦¬ ë³´ëŸ¬ ê°€ì!" },
                    { name: "ê´‘ë‚˜ë£¨", trans: [], desc: "í•œê°•ì´ ë³´ì´ëŠ” ë©‹ì§„ ë™ë„¤ì•¼." },
                    { name: "ì²œí˜¸", trans: ["8"], desc: "ì¥ë‚œê° ê±°ë¦¬ê°€ ìˆì–´! ì™€ ì‹ ë‚œë‹¤!" },
                    { name: "ê°•ë™", trans: [], desc: "ì—¬ê¸°ì„œ ê¸°ì°¨ê°€ ë‘ ê°ˆë˜ë¡œ ë‚˜ë‰˜ì–´!" },
                    { name: "ê¸¸ë™", trans: [], desc: "ê¸¸ë™ ìƒíƒœê³µì›ì´ ìˆì–´. ê°œêµ´ê°œêµ´!" },
                    { name: "êµ½ì€ë‹¤ë¦¬", trans: [], desc: "í™ˆí”ŒëŸ¬ìŠ¤ê°€ ì—­ ì•ˆì— ìˆì–´." },
                    { name: "ëª…ì¼", trans: [], desc: "í•™êµê°€ ì•„ì£¼ ë§ì€ ë™ë„¤ì•¼." },
                    { name: "ê³ ë•", trans: ["9"], desc: "ì•„íŒŒíŠ¸ê°€ ìˆ²ì²˜ëŸ¼ ë§ì€ ê³³ì´ì•¼." },
                    { name: "ìƒì¼ë™", trans: [], desc: "ì²¨ë‹¨ íšŒì‚¬ë“¤ì´ ëª¨ì—¬ìˆëŠ” ê³³ì´ì•¼." },
                    { name: "ê°•ì¼", trans: [], desc: "ì„œìš¸ì˜ ëìë½ì´ì•¼." },
                    { name: "ë¯¸ì‚¬", trans: [], desc: "í˜¸ìˆ˜ê³µì›ì´ ì˜ˆìœ ì‹ ë„ì‹œì•¼." },
                    { name: "í•˜ë‚¨í’ì‚°", trans: [], desc: "ì´ë§ˆíŠ¸ê°€ ê°€ê¹Œì›Œ." },
                    { name: "í•˜ë‚¨ì‹œì²­", trans: [], desc: "í•˜ë‚¨ì‹œì˜ ëŒ€ì¥ì¸ ì‹œì²­ì´ ìˆì–´." },
                    { name: "í•˜ë‚¨ê²€ë‹¨ì‚°", trans: [], desc: "ë„ì°©! ìŠ¤íƒ€í•„ë“œë„ ê°€ê³  ì‚°ì—ë„ ê°ˆ ìˆ˜ ìˆì–´!" }
                ]
            },
            "9": {
                name: "9í˜¸ì„  (ì¤‘ì•™ë³´í›ˆ â¡ ê°œí™”)",
                mainColor: "#AA9872",
                stations: [
                    { name: "ì¤‘ì•™ë³´í›ˆë³‘ì›", trans: [], desc: "ë‚˜ë¼ë¥¼ ì§€í‚¨ ì˜ì›…ë“¤ì„ ìœ„í•œ ë³‘ì›ì´ì•¼." },
                    { name: "ë‘”ì´Œì˜¤ë¥œ", trans: [], desc: "í° í•™êµê°€ ì˜†ì— ìˆì–´." },
                    { name: "ì˜¬ë¦¼í”½ê³µì›", trans: ["5"], desc: "ê±°ëŒ€í•œ ì—„ì§€ì†ê°€ë½ ì¡°ê°ìƒì„ ì°¾ì•„ë´!" },
                    { name: "í•œì„±ë°±ì œ", trans: [], desc: "ë°±ì œ ì‹œëŒ€ ë°•ë¬¼ê´€ì´ ìˆì–´." },
                    { name: "ì†¡íŒŒë‚˜ë£¨", trans: [], desc: "ì˜›ë‚ ì—” ë°°ê°€ ë‹¤ë‹ˆë˜ ê³³ì´ë˜." },
                    { name: "ì„ì´Œ", trans: ["8"], desc: "ë¡¯ë°ì›”ë“œíƒ€ì›Œê°€ ìŠ~ í•˜ê³  ë³´ì—¬!" },
                    { name: "ì„ì´Œê³ ë¶„", trans: [], desc: "ì˜›ë‚  ì™•ë“¤ì˜ ë¬´ë¤ì´ ìˆì–´." },
                    { name: "ì‚¼ì „", trans: [], desc: "ì ì‹¤ì´ë‘ ê°€ê¹Œìš´ ë™ë„¤ì•¼." },
                    { name: "ì¢…í•©ìš´ë™ì¥", trans: ["2"], desc: "ì•¼êµ¬ì¥ì—ì„œ ì‘ì› ì†Œë¦¬ê°€ ë“¤ë ¤!" },
                    { name: "ë´‰ì€ì‚¬", trans: [], desc: "ë„ì‹¬ ì†ì— ì•„ì£¼ í° ì ˆì´ ìˆì–´." },
                    { name: "ì‚¼ì„±ì¤‘ì•™", trans: [], desc: "ì½”ì—‘ìŠ¤ë‘ ê°€ê¹Œì›Œ." },
                    { name: "ì„ ì •ë¦‰", trans: ["ìˆ˜ì¸ë¶„ë‹¹"], desc: "ìˆ² ì†ì— ì™•ë¦‰ì´ ìˆ¨ì–´ìˆì–´." },
                    { name: "ì–¸ì£¼", trans: [], desc: "ê°•ë‚¨ ì°¨ë³‘ì›ì´ ê·¼ì²˜ì— ìˆì–´." },
                    { name: "ì‹ ë…¼í˜„", trans: ["ì‹ ë¶„ë‹¹"], desc: "ê°•ë‚¨ì—ì„œ ì œì¼ ë³µì¡í•œ ê³³ ì¤‘ í•˜ë‚˜ì•¼!" },
                    { name: "ì‚¬í‰", trans: [], desc: "ì¡°ìš©í•œ ì•„íŒŒíŠ¸ ë‹¨ì§€ì•¼." },
                    { name: "ê³ ì†í„°ë¯¸ë„", trans: ["3", "7"], desc: "ì—¬í–‰ ê°€ëŠ” ë²„ìŠ¤ë¥¼ íƒ€ëŠ” ê³³ì´ì•¼!" },
                    { name: "ì‹ ë°˜í¬", trans: [], desc: "í•œê°• ê³µì›ìœ¼ë¡œ ì‚°ì±… ê°€ì!" },
                    { name: "êµ¬ë°˜í¬", trans: [], desc: "ì‘ì€ ëƒ‡ë¬¼ì´ íë¥´ëŠ” ê³³ì´ì•¼." },
                    { name: "ë™ì‘", trans: ["4"], desc: "í˜„ì¶©ì›ì´ ìˆëŠ” ê³³ì´ì•¼." },
                    { name: "í‘ì„", trans: [], desc: "ì¤‘ì•™ëŒ€í•™êµê°€ ìˆì–´." },
                    { name: "ë…¸ë“¤", trans: [], desc: "í•œê°• ìœ„ì— ë–  ìˆëŠ” ì„¬ì´ì•¼!" },
                    { name: "ë…¸ëŸ‰ì§„", trans: ["1"], desc: "ë§›ìˆëŠ” íšŒë¥¼ ë¨¹ìœ¼ëŸ¬ ê°€ì!" },
                    { name: "ìƒ›ê°•", trans: ["ì‹ ë¦¼"], desc: "ì—¬ì˜ë„ ìƒ›ê°•ì— ì˜¤ë¦¬ë“¤ì´ ì‚´ì•„." },
                    { name: "ì—¬ì˜ë„", trans: ["5"], desc: "ë”í˜„ëŒ€ ì„œìš¸ ë°±í™”ì ì´ ìˆì–´!" },
                    { name: "êµ­íšŒì˜ì‚¬ë‹¹", trans: [], desc: "íƒœê¶Œë¸Œì´ê°€ ë‚˜ì˜¬ ê²ƒ ê°™ì€ ë‘¥ê·¼ ì§€ë¶• ê±´ë¬¼!" },
                    { name: "ë‹¹ì‚°", trans: ["2"], desc: "ì „ì²  íƒ€ê³  í•œê°• ë‹¤ë¦¬ë¥¼ ê±´ë„ˆë´!" },
                    { name: "ì„ ìœ ë„", trans: [], desc: "ê³µì›ì´ ëœ ì˜›ë‚  ì •ìˆ˜ì¥ì´ì•¼." },
                    { name: "ì‹ ëª©ë™", trans: [], desc: "ìì „ê±° íƒ€ê¸° ì¢‹ì€ ì•ˆì–‘ì²œì´ ìˆì–´." },
                    { name: "ì—¼ì°½", trans: [], desc: "ì˜›ë‚ ì— ì†Œê¸ˆ ì°½ê³ ê°€ ìˆì—ˆëŒ€." },
                    { name: "ë“±ì´Œ", trans: [], desc: "ì¹¼êµ­ìˆ˜ê°€ ë§›ìˆëŠ” ë™ë„¤ì•¼." },
                    { name: "ì¦ë¯¸", trans: [], desc: "ì´ë§ˆíŠ¸ê°€ ë°”ë¡œ ì˜†ì— ìˆì–´." },
                    { name: "ê°€ì–‘", trans: [], desc: "í—ˆì¤€ ì„ ìƒë‹˜ ë°•ë¬¼ê´€ì´ ìˆì–´!" },
                    { name: "ì–‘ì²œí–¥êµ", trans: [], desc: "ì˜›ë‚  í•™êµê°€ ê·¸ëŒ€ë¡œ ë‚¨ì•„ìˆì–´." },
                    { name: "ë§ˆê³¡ë‚˜ë£¨", trans: ["ê³µí•­"], desc: "ì‹ë¬¼ì›ì´ ì•„ì£¼ ë©‹ì§„ ê³³ì´ì•¼!" },
                    { name: "ì‹ ë°©í™”", trans: [], desc: "ìƒˆ ì•„íŒŒíŠ¸ë“¤ì´ ì•„ì£¼ ë§ì•„." },
                    { name: "ê³µí•­ì‹œì¥", trans: [], desc: "ì‹œì¥ì—ì„œ ë§›ìˆëŠ” ë–¡ë³¶ì´ ë¨¹ì." },
                    { name: "ê¹€í¬ê³µí•­", trans: ["5", "ê³µí•­", "ì„œí•´"], desc: "ë¹„í–‰ê¸° íƒ€ê³  ì—¬í–‰ ê°€ì! ìŠìŠ!" },
                    { name: "ê°œí™”", trans: [], desc: "9í˜¸ì„  ê¸°ì°¨ë“¤ì´ ì ìëŠ” ì§‘ì´ì•¼." }
                ]
            }
        };

        let currentLine = null;
        let stationList = [];
        let currentIndex = 0;
        let currentDescText = ""; 
        let audioContext = null; 
        
        // --- â˜… [ìˆ˜ì •ë¨] ì¤‘ë³µ ì…ë ¥ ë°©ì§€ ë³€ìˆ˜ ---
        let isProcessing = false; 

        // --- 2. ì˜¤ë””ì˜¤ ê¸°ëŠ¥ ---
        
        function unlockAudio() {
            if (!audioContext) audioContext = new (window.AudioContext || window.webkitAudioContext)();
            if (audioContext.state === 'suspended') audioContext.resume();
            
            if (window.speechSynthesis) {
                const emptyUtterance = new SpeechSynthesisUtterance('');
                window.speechSynthesis.speak(emptyUtterance);
            }
        }

        function playChime() {
            if (!audioContext) audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const now = audioContext.currentTime;
            
            const masterGain = audioContext.createGain();
            masterGain.gain.value = 0.3; 
            masterGain.connect(audioContext.destination);

            const notes = [523.25, 659.25, 783.99, 1046.50]; 
            const times = [0, 0.4, 0.8, 1.2]; 

            notes.forEach((freq, i) => {
                const osc = audioContext.createOscillator();
                const gain = audioContext.createGain();
                
                osc.type = 'sine'; 
                osc.frequency.value = freq;
                
                gain.gain.setValueAtTime(0.5, now + times[i]);
                gain.gain.exponentialRampToValueAtTime(0.001, now + times[i] + 0.6); 
                
                osc.connect(gain);
                gain.connect(masterGain); 
                
                osc.start(now + times[i]);
                osc.stop(now + times[i] + 0.6);
            });
        }

        function playSafeVoice(text) {
            if (!window.speechSynthesis) return;
            window.speechSynthesis.cancel(); 

            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'ko-KR';
            utterance.rate = 1.0; 
            utterance.pitch = 1.2; 

            const voices = window.speechSynthesis.getVoices();
            const korVoices = voices.filter(v => v.lang.includes('ko'));
            const bestVoice = korVoices.find(v => v.name.includes('Google')) 
                           || korVoices.find(v => v.name.includes('Siri'))
                           || korVoices.find(v => v.name.includes('Premium'))
                           || korVoices[0];

            if(bestVoice) utterance.voice = bestVoice;

            window.speechSynthesis.speak(utterance);
        }

        if (window.speechSynthesis) {
            window.speechSynthesis.onvoiceschanged = () => {};
        }

        function speakWithChime() {
            if(!currentDescText) return;
            playChime();
            playSafeVoice(currentDescText);
        }

        // --- 3. í‚¤ë³´ë“œ ì…ë ¥ ê¸°ëŠ¥ ---
        document.addEventListener('keydown', (e) => {
            // ê²Œì„ ì¤‘ì´ ì•„ë‹ˆê±°ë‚˜ ì²˜ë¦¬ ì¤‘ì´ë©´ ë¬´ì‹œ
            if (document.getElementById('play-screen').style.display !== 'block') return;
            if (isProcessing) return; // â˜… ì…ë ¥ ì ê¸ˆ í™•ì¸

            const key = e.key;
            const optionBtns = document.querySelectorAll('.option-btn');
            
            if ((key === '1' || key === 'NumPad1') && optionBtns[0]) {
                optionBtns[0].click();
                optionBtns[0].classList.add('key-pressed');
                setTimeout(()=>optionBtns[0].classList.remove('key-pressed'), 200);
            } else if ((key === '2' || key === 'NumPad2') && optionBtns[1]) {
                optionBtns[1].click();
                optionBtns[1].classList.add('key-pressed');
                setTimeout(()=>optionBtns[1].classList.remove('key-pressed'), 200);
            } else if ((key === '3' || key === 'NumPad3') && optionBtns[2]) {
                optionBtns[2].click();
                optionBtns[2].classList.add('key-pressed');
                setTimeout(()=>optionBtns[2].classList.remove('key-pressed'), 200);
            }
        });

        // --- 4. ê²Œì„ ë¡œì§ ---
        function selectLine(lineId) {
            unlockAudio(); 

            currentLine = gameData[lineId];
            stationList = currentLine.stations;
            
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('game-header').style.display = 'flex';
            document.getElementById('game-container').style.display = 'flex';
            
            document.getElementById('game-title').innerText = currentLine.name;
            document.getElementById('game-title').style.color = currentLine.mainColor;
            document.getElementById('game-area').style.borderColor = currentLine.mainColor;
            
            initGame();
        }

        function initGame() {
            currentIndex = 0;
            isProcessing = false; // ì´ˆê¸°í™”
            updateScore();
            
            document.getElementById('play-screen').style.display = 'block';
            document.getElementById('success-screen').style.display = 'none';
            document.getElementById('message').innerText = "";
            document.getElementById('info-title').innerText = "ì—­ ì´ì•¼ê¸° ğŸ“–";
            
            const introText = "ì•ˆë…•? ë‚˜ëŠ” ì§€í•˜ì²  ìš”ì •ì´ì•¼.<br>ì •ë‹µì„ ë§ì¶”ë©´ ì´ì•¼ê¸°ë¥¼ ì½ì–´ì¤„ê²Œ!";
            document.getElementById('info-text').innerHTML = introText;
            currentDescText = "ì•ˆë…•? ë‚˜ëŠ” ì§€í•˜ì²  ìš”ì •ì´ì•¼. ì •ë‹µì„ ë§ì¶”ë©´ ì´ì•¼ê¸°ë¥¼ ì½ì–´ì¤„ê²Œ!"; 
            
            drawMapInitial();
            revealStation(0);
            loadQuestion();
        }

        function updateScore() {
            document.getElementById('score-board').innerHTML = 
                `ì§„í–‰ë„: <span class="highlight-score">${currentIndex}</span> / ${stationList.length - 1}`;
        }

        function drawMapInitial() {
            const mapContainer = document.getElementById('map-container');
            mapContainer.innerHTML = '';

            stationList.forEach((station, index) => {
                const wrapper = document.createElement('div');
                wrapper.className = 'station-wrapper';

                const dot = document.createElement('div');
                dot.className = 'station-dot';
                dot.id = `dot-${index}`;
                dot.dataset.activeColor = currentLine.mainColor;
                
                const nameDiv = document.createElement('div');
                nameDiv.className = 'station-name';
                nameDiv.id = `name-${index}`;
                nameDiv.innerText = station.name; 

                if(station.trans.length > 0) {
                    const badgeContainer = document.createElement('div');
                    badgeContainer.className = 'transfer-badges';
                    station.trans.forEach(line => {
                        const badge = document.createElement('span');
                        badge.className = 'line-badge';
                        badge.style.backgroundColor = lineColors[line] || '#ccc';
                        badgeContainer.appendChild(badge);
                    });
                    nameDiv.appendChild(badgeContainer);
                }

                wrapper.appendChild(dot);
                wrapper.appendChild(nameDiv);
                mapContainer.appendChild(wrapper);
            });
        }

        function revealStation(index) {
            const dot = document.getElementById(`dot-${index}`);
            const name = document.getElementById(`name-${index}`);
            
            if(dot) {
                dot.classList.add('active');
                dot.style.backgroundColor = currentLine.mainColor;
                dot.style.borderColor = currentLine.mainColor;
            }
            if(name) name.classList.add('revealed');
        }

        function loadQuestion() {
            isProcessing = false; // â˜… ë¬¸ì œ ë¡œë“œ ì™„ë£Œ í›„ ì ê¸ˆ í•´ì œ

            if (currentIndex >= stationList.length - 1) {
                gameClear();
                return;
            }

            const currentData = stationList[currentIndex];
            const nextData = stationList[currentIndex + 1];

            document.getElementById('current-station').innerText = currentData.name;
            document.getElementById('current-station').style.color = currentLine.mainColor;
            
            let options = [nextData.name];
            
            const otherLineStations = Object.keys(otherStationsDB);
            const currentLineStationNames = stationList.map(s => s.name);
            const allWrongCandidates = [...otherLineStations, ...currentLineStationNames];

            while(options.length < 3) {
                const randomPick = allWrongCandidates[Math.floor(Math.random() * allWrongCandidates.length)];
                if(randomPick !== nextData.name && !options.includes(randomPick) && randomPick !== currentData.name) {
                    options.push(randomPick);
                }
            }

            options.sort(() => Math.random() - 0.5);

            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = '';

            options.forEach((optName, idx) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                
                const numSpan = `<span class="btn-num" style="background-color:${currentLine.mainColor}">${idx+1}</span>`;
                btn.innerHTML = `${numSpan} ${optName}`;
                btn.onclick = () => checkAnswer(optName, nextData, btn);
                
                optionsContainer.appendChild(btn);
            });
        }

        function checkAnswer(selectedName, nextData, btnElement) {
            // â˜… ì´ë¯¸ ì²˜ë¦¬ ì¤‘ì´ë©´ í´ë¦­ ë¬´ì‹œ
            if (isProcessing) return;

            const messageEl = document.getElementById('message');

            if (selectedName === nextData.name) {
                // [ì •ë‹µ]
                isProcessing = true; // â˜… ì ê¸ˆ ì‹œì‘
                messageEl.innerText = "ë”©ë™ëŒ•! ì •ë‹µì…ë‹ˆë‹¤! â­•";
                messageEl.className = "correct";
                
                currentIndex++;
                updateScore();
                revealStation(currentIndex); 

                document.getElementById('info-title').innerText = `${nextData.name}ì—­ ì´ì•¼ê¸° ğŸ“–`;
                document.getElementById('info-text').innerHTML = nextData.desc;
                
                const textToRead = `ì´ë²ˆ ì—­ì€ ${nextData.name}, ${nextData.name} ì—­ì…ë‹ˆë‹¤. ${nextData.desc}`;
                currentDescText = textToRead; 
                
                unlockAudio(); 
                speakWithChime(); 

                // ë²„íŠ¼ë“¤ë„ ì‹œê°ì ìœ¼ë¡œ ë¹„í™œì„±í™”
                const btns = document.querySelectorAll('.option-btn');
                btns.forEach(b => b.disabled = true);

                setTimeout(() => {
                    messageEl.innerText = "";
                    loadQuestion();
                }, 1500);

            } else {
                // [ì˜¤ë‹µ] - ì˜¤ë‹µì€ ì ê¸ˆí•˜ì§€ ì•ŠìŒ (ë‹¤ì‹œ ì„ íƒ ê°€ëŠ¥í•˜ê²Œ)
                let feedbackText = "";
                if (otherStationsDB[selectedName]) {
                    feedbackText = `(ë•¡! ${otherStationsDB[selectedName]}ì´ì—ìš”)`;
                } else {
                    const foundInCurrent = stationList.find(s => s.name === selectedName);
                    if (foundInCurrent) {
                        feedbackText = `(ê°™ì€ ë…¸ì„ ì´ì§€ë§Œ ë‹¤ìŒ ì—­ì€ ì•„ë‹ˆì—ìš”)`;
                    } else {
                        feedbackText = "(ë‹¤ë¥¸ í˜¸ì„  ì—­ì´ì—ìš”)";
                    }
                }

                let feedbackSpan = btnElement.querySelector('.wrong-feedback');
                if(!feedbackSpan) {
                    feedbackSpan = document.createElement('span');
                    feedbackSpan.className = 'wrong-feedback';
                    btnElement.appendChild(feedbackSpan);
                }
                feedbackSpan.innerText = feedbackText;

                messageEl.innerText = "í‹€ë ¸ì–´ìš”. ë‹¤ì‹œ ìƒê°í•´ë³¼ê¹Œìš”? âŒ";
                messageEl.className = "wrong";
                btnElement.style.backgroundColor = "#fff5f5";
            }
        }

        function gameClear() {
            document.getElementById('play-screen').style.display = 'none';
            document.getElementById('success-screen').style.display = 'block';
            document.getElementById('score-board').innerHTML = `ì™„ë£Œ! <span class="highlight-score">${stationList.length-1}</span> / ${stationList.length-1}`;
            
            const clearText = `ì™€! ${currentLine.name}ì„ ì „ë¶€ ì™¸ì› êµ¬ë‚˜! ì •ë§ ëŒ€ë‹¨í•´! ì²™ì²™ë°•ì‚¬ë‹˜ ìµœê³ !`;
            document.getElementById('info-title').innerText = "ì¶•í•˜í•´! ğŸ‰";
            document.getElementById('info-text').innerHTML = clearText;
            
            currentDescText = clearText;
            unlockAudio();
            speakWithChime();
        }
    </script>
</body>
</html>
